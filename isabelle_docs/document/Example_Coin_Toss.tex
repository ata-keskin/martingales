%
\begin{isabellebody}%
\setisabellecontext{Example{\isacharunderscore}{\kern0pt}Coin{\isacharunderscore}{\kern0pt}Toss}%
%
\isadelimtheory
\isanewline
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Example{\isacharunderscore}{\kern0pt}Coin{\isacharunderscore}{\kern0pt}Toss\isanewline
\ \ \isakeyword{imports}\ Martingale\ {\isachardoublequoteopen}HOL{\isacharminus}{\kern0pt}Probability{\isachardot}{\kern0pt}Stream{\isacharunderscore}{\kern0pt}Space{\isachardoublequoteclose}\ {\isachardoublequoteopen}HOL{\isacharminus}{\kern0pt}Probability{\isachardot}{\kern0pt}Probability{\isacharunderscore}{\kern0pt}Mass{\isacharunderscore}{\kern0pt}Function{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isadelimdocument
%
\endisadelimdocument
%
\isatagdocument
%
\isamarkupsection{Example: Coin Toss%
}
\isamarkuptrue%
%
\endisatagdocument
{\isafolddocument}%
%
\isadelimdocument
%
\endisadelimdocument
%
\begin{isamarkuptext}%
Consider a coin-tossing game, where the coin lands on heads with probability \isa{p\ {\isasymin}\ {\isacharbrackleft}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}\ {\isadigit{1}}{\isacharbrackright}{\kern0pt}}. Assume that the gambler wins a fixed amount \isa{c\ {\isachargreater}{\kern0pt}\ {\isadigit{0}}} on a heads outcome 
      and loses the same amount \isa{c} on a tails outcome. Let \isa{{\isacharparenleft}{\kern0pt}X\isactrlsub n{\isacharparenright}{\kern0pt}\isactrlsub n\isactrlsub {\isasymin}\isactrlsub {\isasymnat}} be a stochastic process, where \isa{X\isactrlsub n} denotes the gambler’s fortune after the \isa{n}-th coin toss. 
      Then, we have the following three cases.%
\end{isamarkuptext}\isamarkuptrue%
%
\begin{isamarkuptext}%
1. If \isa{p\ {\isacharequal}{\kern0pt}\ {\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}}, it means the coin is fair and has an equal chance of landing heads or tails. 
      In this case, the gambler, on average, neither wins nor loses money over time. The expected value of the gambler’s fortune stays the same over time. 
      Therefore, \isa{{\isacharparenleft}{\kern0pt}X\isactrlsub n{\isacharparenright}{\kern0pt}\isactrlsub n\isactrlsub {\isasymin}\isactrlsub {\isasymnat}} is a martingale.%
\end{isamarkuptext}\isamarkuptrue%
%
\begin{isamarkuptext}%
2. If \isa{p\ {\isasymge}\ {\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}} , it means the coin is biased in favor of heads. In this case, the gambler is more likely to win money on each bet. 
      Over time, the gambler’s fortune tends to increase on average. 
      Therefore, \isa{{\isacharparenleft}{\kern0pt}X\isactrlsub n{\isacharparenright}{\kern0pt}\isactrlsub n\isactrlsub {\isasymin}\isactrlsub {\isasymnat}} is a submartingale.%
\end{isamarkuptext}\isamarkuptrue%
%
\begin{isamarkuptext}%
3. If \isa{p\ {\isasymle}\ {\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}} , it means the coin is biased in favor of tails. In this scenario, the gambler is more likely to lose money on each bet. 
      Over time, the gambler’s fortune decreases on average. 
      Therefore, \isa{{\isacharparenleft}{\kern0pt}X\isactrlsub n{\isacharparenright}{\kern0pt}\isactrlsub n\isactrlsub {\isasymin}\isactrlsub {\isasymnat}} is a supermartingale.%
\end{isamarkuptext}\isamarkuptrue%
%
\begin{isamarkuptext}%
To formalize this example, we first consider a probability space consisting of infinite sequences of coin tosses.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ bernoulli{\isacharunderscore}{\kern0pt}stream\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}real\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}bool\ stream{\isacharparenright}{\kern0pt}\ measure{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}stream\ p\ {\isacharequal}{\kern0pt}\ stream{\isacharunderscore}{\kern0pt}space\ {\isacharparenleft}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ space{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharbrackleft}{\kern0pt}simp{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ UNIV{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def\ space{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}space{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
We define the fortune of the player at time \isa{n} to be the number of heads minus number of tails.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ fortune\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ bool\ stream\ {\isasymRightarrow}\ real{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}fortune\ n\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}s{\isachardot}{\kern0pt}\ {\isasymSum}b\ {\isasymleftarrow}\ stake\ {\isacharparenleft}{\kern0pt}Suc\ n{\isacharparenright}{\kern0pt}\ s{\isachardot}{\kern0pt}\ if\ b\ then\ {\isadigit{1}}\ else\ {\isacharminus}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\ toss\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}nat\ {\isasymRightarrow}\ bool\ stream\ {\isasymRightarrow}\ real{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}toss\ n\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}s{\isachardot}{\kern0pt}\ if\ snth\ s\ n\ then\ {\isadigit{1}}\ else\ {\isacharminus}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ toss{\isacharunderscore}{\kern0pt}indicator{\isacharunderscore}{\kern0pt}def{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}toss\ n\ {\isacharequal}{\kern0pt}\ indicator\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}\ {\isacharminus}{\kern0pt}\ indicator\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymnot}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ toss{\isacharunderscore}{\kern0pt}def\ indicator{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ range{\isacharunderscore}{\kern0pt}toss{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}range\ {\isacharparenleft}{\kern0pt}toss\ n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}{\isacharminus}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}\ {\isadigit{1}}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}sconst\ True\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}sconst\ False\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}x{\isachardot}{\kern0pt}\ x\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymexists}x{\isachardot}{\kern0pt}\ {\isasymnot}x\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast{\isacharplus}{\kern0pt}\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{unfolding}\isamarkupfalse%
\ toss{\isacharunderscore}{\kern0pt}def\ image{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ vimage{\isacharunderscore}{\kern0pt}toss{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}toss\ n\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ A\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}if\ {\isadigit{1}}\ {\isasymin}\ A\ then\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}\ else\ {\isacharbraceleft}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymunion}\ {\isacharparenleft}{\kern0pt}if\ {\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymin}\ A\ then\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymnot}s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}\ else\ {\isacharbraceleft}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ vimage{\isacharunderscore}{\kern0pt}def\ toss{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}Suc{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fortune\ {\isacharparenleft}{\kern0pt}Suc\ n{\isacharparenright}{\kern0pt}\ s\ {\isacharequal}{\kern0pt}\ fortune\ n\ s\ {\isacharplus}{\kern0pt}\ toss\ {\isacharparenleft}{\kern0pt}Suc\ n{\isacharparenright}{\kern0pt}\ s{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}induction\ n\ arbitrary{\isacharcolon}{\kern0pt}\ s{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}def\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}{\isacharplus}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}fortune\ n\ s\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymSum}i\ {\isasymin}\ {\isacharbraceleft}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}n{\isacharbraceright}{\kern0pt}{\isachardot}{\kern0pt}\ toss\ i\ s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}induction\ n\ arbitrary{\isacharcolon}{\kern0pt}\ s{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}def\ toss{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}Suc{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}bound{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}norm\ {\isacharparenleft}{\kern0pt}fortune\ n\ s{\isacharparenright}{\kern0pt}\ {\isasymle}\ Suc\ n{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}induction\ n{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}force\ simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}{\isacharplus}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Our definition of \isa{bernoulli{\isacharunderscore}{\kern0pt}stream} constitutes a probability space.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{interpretation}\isamarkupfalse%
\ prob{\isacharunderscore}{\kern0pt}space\ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf{\isachardot}{\kern0pt}prob{\isacharunderscore}{\kern0pt}space{\isacharunderscore}{\kern0pt}axioms\ prob{\isacharunderscore}{\kern0pt}space{\isachardot}{\kern0pt}prob{\isacharunderscore}{\kern0pt}space{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}space{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{abbreviation}\isamarkupfalse%
\ {\isachardoublequoteopen}toss{\isacharunderscore}{\kern0pt}filtration\ p\ {\isasymequiv}\ nat{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ toss{\isachardoublequoteclose}%
\begin{isamarkuptext}%
The stochastic process \isa{toss} is adapted to the filtration it generates.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{interpretation}\isamarkupfalse%
\ toss{\isacharcolon}{\kern0pt}\ nat{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process\ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ toss{\isachardoublequoteclose}\ toss\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ nat{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isachardot}{\kern0pt}intro\ stochastic{\isacharunderscore}{\kern0pt}process{\isachardot}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ {\isacharparenleft}{\kern0pt}unfold{\isacharunderscore}{\kern0pt}locales{\isacharcomma}{\kern0pt}\ auto\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def\ bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Similarly, the stochastic process \isa{fortune} is adapted to the filtration generated by the tosses.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{interpretation}\isamarkupfalse%
\ fortune{\isacharcolon}{\kern0pt}\ nat{\isacharunderscore}{\kern0pt}finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}linorder\ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ toss{\isachardoublequoteclose}\ fortune\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}linorder\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p{\isacharparenright}{\kern0pt}\ fortune{\isachardoublequoteclose}\isanewline
\ \ \isacommand{unfolding}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum\ \ \ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ nat{\isacharunderscore}{\kern0pt}finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}linorder{\isachardot}{\kern0pt}intro\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}linorder{\isachardot}{\kern0pt}intro\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isacharunderscore}{\kern0pt}order{\isachardot}{\kern0pt}intro\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ finite{\isacharunderscore}{\kern0pt}adapted{\isacharunderscore}{\kern0pt}process{\isachardot}{\kern0pt}intro\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ toss{\isachardot}{\kern0pt}partial{\isacharunderscore}{\kern0pt}sum{\isacharunderscore}{\kern0pt}adapted{\isacharbrackleft}{\kern0pt}folded\ atMost{\isacharunderscore}{\kern0pt}atLeast{\isadigit{0}}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ intro{\isacharunderscore}{\kern0pt}locales\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ integrable{\isacharunderscore}{\kern0pt}toss{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}integrable\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss\ n{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ toss{\isachardot}{\kern0pt}random{\isacharunderscore}{\kern0pt}variable\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ Bochner{\isacharunderscore}{\kern0pt}Integration{\isachardot}{\kern0pt}integrable{\isacharunderscore}{\kern0pt}bound{\isacharbrackleft}{\kern0pt}OF\ integrable{\isacharunderscore}{\kern0pt}const{\isacharbrackleft}{\kern0pt}of\ {\isacharunderscore}{\kern0pt}\ {\isachardoublequoteopen}{\isadigit{1}}\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ real{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ integrable{\isacharunderscore}{\kern0pt}fortune{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}integrable\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}fortune\ n{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}bound\ \isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ Bochner{\isacharunderscore}{\kern0pt}Integration{\isachardot}{\kern0pt}integrable{\isacharunderscore}{\kern0pt}bound{\isacharbrackleft}{\kern0pt}OF\ integrable{\isacharunderscore}{\kern0pt}const{\isacharbrackleft}{\kern0pt}of\ {\isacharunderscore}{\kern0pt}\ {\isachardoublequoteopen}Suc\ n{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\ fortune{\isachardot}{\kern0pt}random{\isacharunderscore}{\kern0pt}variable{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
We provide the following lemma to explicitly calculate the probability of events in this probability space.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharunderscore}{\kern0pt}pred{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ p{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}finite\ J{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}prob\ p\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}j{\isasymin}J{\isachardot}{\kern0pt}\ P\ j\ {\isacharequal}{\kern0pt}\ w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ j{\isacharbraceright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p\ {\isacharcircum}{\kern0pt}\ card\ {\isacharparenleft}{\kern0pt}J\ {\isasyminter}\ Collect\ P{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isacharminus}{\kern0pt}\ p{\isacharparenright}{\kern0pt}\ {\isacharcircum}{\kern0pt}\ {\isacharparenleft}{\kern0pt}card\ {\isacharparenleft}{\kern0pt}J\ {\isacharminus}{\kern0pt}\ Collect\ P{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}PiE\ {\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymPi}\isactrlsub E\ i{\isasymin}J{\isachardot}{\kern0pt}\ if\ P\ i\ then\ {\isacharbraceleft}{\kern0pt}True{\isacharbraceright}{\kern0pt}\ else\ {\isacharbraceleft}{\kern0pt}False{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}product{\isacharunderscore}{\kern0pt}prob{\isacharunderscore}{\kern0pt}space\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ unfold{\isacharunderscore}{\kern0pt}locales\isanewline
\isanewline
\ \ \isacommand{hence}\isamarkupfalse%
\ {\isacharasterisk}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}to{\isacharunderscore}{\kern0pt}stream\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ i{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ to{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ prod{\isacharunderscore}{\kern0pt}emb\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ J\ {\isacharquery}{\kern0pt}PiE{\isachardoublequoteclose}\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \ \ \isacommand{{\isacharbraceleft}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ i{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ i{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}s\ {\isasymin}\ prod{\isacharunderscore}{\kern0pt}emb\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ J\ {\isacharquery}{\kern0pt}PiE{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ prod{\isacharunderscore}{\kern0pt}emb{\isacharunderscore}{\kern0pt}iff{\isacharbrackleft}{\kern0pt}of\ s{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ best{\isacharparenright}{\kern0pt}\ not{\isacharunderscore}{\kern0pt}def\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ id{\isacharunderscore}{\kern0pt}def\ PiE{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}singleton\ UNIV{\isacharunderscore}{\kern0pt}I\ extensional{\isacharunderscore}{\kern0pt}UNIV\ insert{\isacharunderscore}{\kern0pt}iff\ singletonD\ space{\isacharunderscore}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{{\isacharbraceright}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{moreover}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{{\isacharbraceleft}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ i{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ i\ \isakeyword{where}\ {\isachardoublequoteopen}i\ {\isasymin}\ J{\isachardoublequoteclose}\ {\isachardoublequoteopen}P\ i\ {\isasymnoteq}\ s\ i{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ i{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}s\ {\isasymin}\ prod{\isacharunderscore}{\kern0pt}emb\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ J\ {\isacharquery}{\kern0pt}PiE{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ restrict{\isacharunderscore}{\kern0pt}def\ prod{\isacharunderscore}{\kern0pt}emb{\isacharunderscore}{\kern0pt}iff{\isacharbrackleft}{\kern0pt}of\ s{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ ccfv{\isacharunderscore}{\kern0pt}SIG{\isacharparenright}{\kern0pt}\ PiE{\isacharunderscore}{\kern0pt}mem\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}\ id{\isacharunderscore}{\kern0pt}def\ insert{\isacharunderscore}{\kern0pt}iff\ singleton{\isacharunderscore}{\kern0pt}iff{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{{\isacharbraceright}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ inteq{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}to{\isacharunderscore}{\kern0pt}stream\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ prod{\isacharunderscore}{\kern0pt}emb\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ J\ {\isacharquery}{\kern0pt}PiE{\isachardoublequoteclose}\ \isacommand{{\isachardot}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \isacommand{let}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}M\ {\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}Pi\isactrlsub M\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}emeasure\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}s\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ emeasure\ {\isacharquery}{\kern0pt}M\ {\isacharparenleft}{\kern0pt}to{\isacharunderscore}{\kern0pt}stream\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ \ {\isacharequal}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ emeasure{\isacharunderscore}{\kern0pt}distr{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}to{\isacharunderscore}{\kern0pt}stream{\isachardoublequoteclose}\ {\isacharquery}{\kern0pt}M\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}vimage{\isacharunderscore}{\kern0pt}algebra\ {\isacharparenleft}{\kern0pt}streams\ {\isacharparenleft}{\kern0pt}space\ {\isacharparenleft}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharquery}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymforall}i{\isasymin}J{\isachardot}{\kern0pt}\ P\ i\ {\isacharequal}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}{\isacharcomma}{\kern0pt}\ symmetric{\isacharbrackright}{\kern0pt}\ measurable{\isacharunderscore}{\kern0pt}to{\isacharunderscore}{\kern0pt}stream{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ only{\isacharcolon}{\kern0pt}\ bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def\ stream{\isacharunderscore}{\kern0pt}space{\isacharunderscore}{\kern0pt}def\ {\isacharasterisk}{\kern0pt}{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ space{\isacharunderscore}{\kern0pt}PiM\ {\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}smt\ {\isacharparenleft}{\kern0pt}verit{\isacharcomma}{\kern0pt}\ best{\isacharparenright}{\kern0pt}\ emeasure{\isacharunderscore}{\kern0pt}notin{\isacharunderscore}{\kern0pt}sets\ in{\isacharunderscore}{\kern0pt}vimage{\isacharunderscore}{\kern0pt}algebra\ inf{\isacharunderscore}{\kern0pt}top{\isachardot}{\kern0pt}right{\isacharunderscore}{\kern0pt}neutral\ sets{\isacharunderscore}{\kern0pt}distr\ vimage{\isacharunderscore}{\kern0pt}Collect{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ emeasure\ {\isacharquery}{\kern0pt}M\ {\isacharparenleft}{\kern0pt}prod{\isacharunderscore}{\kern0pt}emb\ UNIV\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ J\ {\isacharquery}{\kern0pt}PiE{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ inteq\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ space{\isacharunderscore}{\kern0pt}PiM{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}i{\isasymin}J{\isachardot}{\kern0pt}\ emeasure\ {\isacharparenleft}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}if\ P\ i\ then\ {\isacharbraceleft}{\kern0pt}True{\isacharbraceright}{\kern0pt}\ else\ {\isacharbraceleft}{\kern0pt}False{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ emeasure{\isacharunderscore}{\kern0pt}PiM{\isacharunderscore}{\kern0pt}emb{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ prob{\isacharunderscore}{\kern0pt}space{\isacharunderscore}{\kern0pt}measure{\isacharunderscore}{\kern0pt}pmf\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}i{\isasymin}J\ {\isasyminter}\ Collect\ P{\isachardot}{\kern0pt}\ ennreal\ p{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}i{\isasymin}J\ {\isacharminus}{\kern0pt}\ Collect\ P{\isachardot}{\kern0pt}\ ennreal\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isacharminus}{\kern0pt}\ p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ emeasure{\isacharunderscore}{\kern0pt}pmf{\isacharunderscore}{\kern0pt}single{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isachardoublequoteclose}\ True{\isacharcomma}{\kern0pt}\ unfolded\ pmf{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}True{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ symmetric{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ emeasure{\isacharunderscore}{\kern0pt}pmf{\isacharunderscore}{\kern0pt}single{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isachardoublequoteclose}\ False{\isacharcomma}{\kern0pt}\ unfolded\ pmf{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}False{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharcomma}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ symmetric{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ prod{\isachardot}{\kern0pt}Int{\isacharunderscore}{\kern0pt}Diff{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharparenleft}{\kern0pt}{\isadigit{3}}{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ of\ {\isacharunderscore}{\kern0pt}\ {\isachardoublequoteopen}Collect\ P{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p\ {\isacharcircum}{\kern0pt}\ card\ {\isacharparenleft}{\kern0pt}J\ {\isasyminter}\ Collect\ P{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isacharminus}{\kern0pt}\ p{\isacharparenright}{\kern0pt}\ {\isacharcircum}{\kern0pt}\ card\ {\isacharparenleft}{\kern0pt}J\ {\isacharminus}{\kern0pt}\ Collect\ P{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ prod{\isacharunderscore}{\kern0pt}ennreal\ ennreal{\isacharunderscore}{\kern0pt}mult{\isacharprime}{\kern0pt}\ ennreal{\isacharunderscore}{\kern0pt}power{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ measure{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}emeasure{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}ennreal{\isacharparenright}{\kern0pt}\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ p{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}prob\ p\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p{\isachardoublequoteclose}\isanewline
\ \ \ \ \isakeyword{and}\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}neg{\isacharunderscore}{\kern0pt}snth{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}prob\ p\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymnot}w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ i{\isacharbraceright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isadigit{1}}\ {\isacharminus}{\kern0pt}\ p{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharunderscore}{\kern0pt}pred{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharcomma}{\kern0pt}\ of\ {\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}i{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymlambda}x{\isachardot}{\kern0pt}\ True{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharunderscore}{\kern0pt}pred{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharcomma}{\kern0pt}\ of\ {\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}i{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymlambda}x{\isachardot}{\kern0pt}\ False{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Now we can express the expected value of a single coin toss.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ integral{\isacharunderscore}{\kern0pt}toss{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}expectation\ p\ {\isacharparenleft}{\kern0pt}toss\ n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isadigit{2}}\ {\isacharasterisk}{\kern0pt}\ p\ {\isacharminus}{\kern0pt}\ {\isadigit{1}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isacharbrackleft}{\kern0pt}simp{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}\ {\isasymin}\ events\ p{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ measurable{\isacharunderscore}{\kern0pt}snth{\isacharbrackleft}{\kern0pt}THEN\ measurable{\isacharunderscore}{\kern0pt}sets{\isacharcomma}{\kern0pt}\ of\ {\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}True{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}measure{\isacharunderscore}{\kern0pt}pmf\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}pmf\ p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ n{\isacharcomma}{\kern0pt}\ folded\ bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}def{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ vimage{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}expectation\ p\ {\isacharparenleft}{\kern0pt}toss\ n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ Bochner{\isacharunderscore}{\kern0pt}Integration{\isachardot}{\kern0pt}simple{\isacharunderscore}{\kern0pt}bochner{\isacharunderscore}{\kern0pt}integral\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss\ n{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ toss{\isachardot}{\kern0pt}random{\isacharunderscore}{\kern0pt}variable{\isacharbrackleft}{\kern0pt}of\ n{\isacharcomma}{\kern0pt}\ THEN\ measurable{\isacharunderscore}{\kern0pt}sets{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ simple{\isacharunderscore}{\kern0pt}bochner{\isacharunderscore}{\kern0pt}integrable{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}integral{\isacharbrackleft}{\kern0pt}symmetric{\isacharbrackright}{\kern0pt}\ simple{\isacharunderscore}{\kern0pt}bochner{\isacharunderscore}{\kern0pt}integrable{\isachardot}{\kern0pt}intros{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def\ simple{\isacharunderscore}{\kern0pt}function{\isacharunderscore}{\kern0pt}def\ image{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p\ {\isacharminus}{\kern0pt}\ prob\ p\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ {\isasymnot}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ simple{\isacharunderscore}{\kern0pt}bochner{\isacharunderscore}{\kern0pt}integral{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ range{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p\ {\isacharminus}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isacharminus}{\kern0pt}\ prob\ p\ {\isacharbraceleft}{\kern0pt}s{\isachardot}{\kern0pt}\ s\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ n{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ prob{\isacharunderscore}{\kern0pt}compl{\isacharbrackleft}{\kern0pt}symmetric{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ auto\ simp\ add{\isacharcolon}{\kern0pt}\ Collect{\isacharunderscore}{\kern0pt}neg{\isacharunderscore}{\kern0pt}eq\ Compl{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}Diff{\isacharunderscore}{\kern0pt}UNIV{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{using}\isamarkupfalse%
\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharbrackright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Now, we show that the tosses are independent from one another.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ indep{\isacharunderscore}{\kern0pt}vars{\isacharunderscore}{\kern0pt}toss{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}indep{\isacharunderscore}{\kern0pt}vars\ p\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ borel{\isacharparenright}{\kern0pt}\ toss\ {\isacharbraceleft}{\kern0pt}{\isadigit{0}}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}subst\ indep{\isacharunderscore}{\kern0pt}vars{\isacharunderscore}{\kern0pt}def{\isacharcomma}{\kern0pt}\ intro\ conjI\ indep{\isacharunderscore}{\kern0pt}sets{\isacharunderscore}{\kern0pt}sigma{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{{\isacharbraceleft}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ A\ J\ \isacommand{assume}\isamarkupfalse%
\ asm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}J\ {\isasymnoteq}\ {\isacharbraceleft}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}finite\ J{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasymforall}j{\isasymin}J{\isachardot}{\kern0pt}\ A\ j\ {\isasymin}\ {\isacharbraceleft}{\kern0pt}toss\ j\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ A\ {\isasyminter}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharbar}{\kern0pt}A{\isachardot}{\kern0pt}\ A\ {\isasymin}\ borel{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}j{\isasymin}J{\isachardot}{\kern0pt}\ {\isasymexists}B\ {\isasymin}\ borel{\isachardot}{\kern0pt}\ A\ j\ {\isacharequal}{\kern0pt}\ toss\ j\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ B\ {\isasyminter}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ B\ \isakeyword{where}\ B{\isacharunderscore}{\kern0pt}is{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}A\ j\ {\isacharequal}{\kern0pt}\ toss\ j\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ B\ j\ {\isasyminter}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}B\ j\ {\isasymin}\ borel{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isachardoublequoteclose}\ \isakeyword{for}\ j\ \isacommand{by}\isamarkupfalse%
\ metis\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}prob\ p\ {\isacharparenleft}{\kern0pt}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ cases%
\begin{isamarkuptext}%
We consider the case where there is a zero probability event.%
\end{isamarkuptext}\isamarkuptrue%
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}j\ {\isasymin}\ J{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymnotin}\ B\ j\ {\isasymand}\ {\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymnotin}\ B\ j{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ j\ \isakeyword{where}\ j{\isacharunderscore}{\kern0pt}is{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isadigit{1}}\ {\isasymnotin}\ B\ j{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymnotin}\ B\ j{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}empty{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}A\ j\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ B{\isacharunderscore}{\kern0pt}is\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}force\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def\ vimage{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}is\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \ \ \ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isadigit{0}}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}empty\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{using}\isamarkupfalse%
\ j{\isacharunderscore}{\kern0pt}is\ asm{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{next}\isamarkupfalse%
%
\begin{isamarkuptext}%
We now assume all events have positive probability.%
\end{isamarkuptext}\isamarkuptrue%
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymexists}j\ {\isasymin}\ J{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymnotin}\ B\ j\ {\isasymand}\ {\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymnotin}\ B\ j{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isacharasterisk}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isadigit{1}}\ {\isasymin}\ B\ j\ {\isasymor}\ {\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymin}\ B\ j{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isachardoublequoteclose}\ \isakeyword{for}\ j\ \isacommand{using}\isamarkupfalse%
\ that\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isanewline
\isanewline
\ \ \ \ \ \ \isacommand{define}\isamarkupfalse%
\ J{\isacharprime}{\kern0pt}\ \isakeyword{where}\ {\isacharbrackleft}{\kern0pt}simp{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}J{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}j\ {\isasymin}\ J{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isasymin}\ B\ j{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharminus}{\kern0pt}{\isadigit{1}}\ {\isasymnotin}\ B\ j{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}toss\ j\ w\ {\isasymin}\ B\ j\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isasymin}\ B\ j{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ j{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{for}\ w\ j\ \isacommand{using}\isamarkupfalse%
\ that\ \isacommand{unfolding}\isamarkupfalse%
\ toss{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}j{\isasymin}J{\isacharprime}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isasymin}\ B\ j{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ j{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ B{\isacharunderscore}{\kern0pt}is\ \isacommand{by}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ prob{\isacharunderscore}{\kern0pt}J{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}prob\ p\ {\isacharparenleft}{\kern0pt}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ p\ {\isacharcircum}{\kern0pt}\ card\ {\isacharparenleft}{\kern0pt}J{\isacharprime}{\kern0pt}\ {\isasyminter}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isadigit{1}}\ {\isacharminus}{\kern0pt}\ p{\isacharparenright}{\kern0pt}\ {\isacharcircum}{\kern0pt}\ card\ {\isacharparenleft}{\kern0pt}J{\isacharprime}{\kern0pt}\ {\isacharminus}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharunderscore}{\kern0pt}pred{\isacharbrackleft}{\kern0pt}OF\ assms\ finite{\isacharunderscore}{\kern0pt}subset{\isacharbrackleft}{\kern0pt}OF\ {\isacharunderscore}{\kern0pt}\ asm{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ of\ J{\isacharprime}{\kern0pt}\ {\isachardoublequoteopen}{\isasymlambda}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ auto%
\begin{isamarkuptext}%
The index set \isa{J{\isacharprime}{\kern0pt}} consists of the indices of all non-trivial events.%
\end{isamarkuptext}\isamarkuptrue%
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}True{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}A\ j\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ j{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isacharprime}{\kern0pt}\ {\isasyminter}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{for}\ j\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ that\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def\ B{\isacharunderscore}{\kern0pt}is{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ split{\isacharcolon}{\kern0pt}\ if{\isacharunderscore}{\kern0pt}splits{\isacharparenright}{\kern0pt}\ \isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}False{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}A\ j\ {\isacharequal}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}w\ {\isasymin}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymnot}w\ {\isacharbang}{\kern0pt}{\isacharbang}{\kern0pt}\ j{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J{\isacharprime}{\kern0pt}\ {\isacharminus}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{for}\ j\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ that\ B{\isacharunderscore}{\kern0pt}is\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}top{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}A\ j\ {\isacharequal}{\kern0pt}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{if}\ {\isachardoublequoteopen}j\ {\isasymin}\ J\ {\isacharminus}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{for}\ j\ \isacommand{using}\isamarkupfalse%
\ that\ {\isacharasterisk}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ B{\isacharunderscore}{\kern0pt}is\ toss{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{hence}\isamarkupfalse%
\ {\isachardoublequoteopen}prob\ p\ {\isacharparenleft}{\kern0pt}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}{\isasymInter}\ {\isacharparenleft}{\kern0pt}A\ {\isacharbackquote}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ presburger\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isacharprime}{\kern0pt}\ {\isasyminter}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isacharprime}{\kern0pt}\ {\isacharminus}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}j{\isachardot}{\kern0pt}\ {\isadigit{1}}\ {\isasymin}\ B\ j{\isacharbraceright}{\kern0pt}{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ only{\isacharcolon}{\kern0pt}\ prob{\isacharunderscore}{\kern0pt}J{\isacharprime}{\kern0pt}\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}True\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}False\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}snth{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharbrackright}{\kern0pt}\ measure{\isacharunderscore}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream{\isacharunderscore}{\kern0pt}neg{\isacharunderscore}{\kern0pt}snth{\isacharbrackleft}{\kern0pt}OF\ assms{\isacharbrackright}{\kern0pt}\ cong{\isacharcolon}{\kern0pt}\ prod{\isachardot}{\kern0pt}cong{\isacharparenright}{\kern0pt}\ simp\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isacharprime}{\kern0pt}{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ asm{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ prod{\isachardot}{\kern0pt}Int{\isacharunderscore}{\kern0pt}Diff{\isacharbrackleft}{\kern0pt}symmetric{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ auto\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isacharprime}{\kern0pt}{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharasterisk}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J\ {\isacharminus}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ A{\isacharunderscore}{\kern0pt}j{\isacharunderscore}{\kern0pt}top\ prob{\isacharunderscore}{\kern0pt}space\ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymProd}j{\isasymin}J{\isachardot}{\kern0pt}\ prob\ p\ {\isacharparenleft}{\kern0pt}A\ j{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ asm{\isacharparenleft}{\kern0pt}{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}metis\ {\isacharparenleft}{\kern0pt}no{\isacharunderscore}{\kern0pt}types{\isacharcomma}{\kern0pt}\ lifting{\isacharparenright}{\kern0pt}\ J{\isacharprime}{\kern0pt}{\isacharunderscore}{\kern0pt}def\ mem{\isacharunderscore}{\kern0pt}Collect{\isacharunderscore}{\kern0pt}eq\ mult{\isachardot}{\kern0pt}commute\ prod{\isachardot}{\kern0pt}subset{\isacharunderscore}{\kern0pt}diff\ subsetI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{{\isachardot}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \isacommand{{\isacharbraceright}{\kern0pt}}\isamarkupfalse%
\isanewline
\ \ \isacommand{thus}\isamarkupfalse%
\ {\isachardoublequoteopen}indep{\isacharunderscore}{\kern0pt}sets\ p\ {\isacharparenleft}{\kern0pt}{\isasymlambda}i{\isachardot}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}toss\ i\ {\isacharminus}{\kern0pt}{\isacharbackquote}{\kern0pt}\ A\ {\isasyminter}\ space\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharbar}{\kern0pt}A{\isachardot}{\kern0pt}\ A\ {\isasymin}\ sets\ borel{\isacharbraceright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharbraceleft}{\kern0pt}{\isadigit{0}}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ measurable{\isacharunderscore}{\kern0pt}sets{\isacharbrackleft}{\kern0pt}OF\ toss{\isachardot}{\kern0pt}random{\isacharunderscore}{\kern0pt}variable{\isacharbrackright}{\kern0pt}\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ indep{\isacharunderscore}{\kern0pt}setsI\ subsetI{\isacharparenright}{\kern0pt}\ fastforce\isanewline
\isacommand{qed}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp{\isacharcomma}{\kern0pt}\ intro\ Int{\isacharunderscore}{\kern0pt}stableI{\isacharcomma}{\kern0pt}\ simp{\isacharcomma}{\kern0pt}\ metis\ sets{\isachardot}{\kern0pt}Int\ vimage{\isacharunderscore}{\kern0pt}Int{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
The fortune of a player is a martingale (resp. sub- or supermartingale) with respect to the filtration generated by the coin tosses.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{theorem}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}martingale{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}p\ {\isacharequal}{\kern0pt}\ {\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}martingale\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p{\isacharparenright}{\kern0pt}\ fortune{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}indep{\isacharbrackleft}{\kern0pt}OF\ fortune{\isachardot}{\kern0pt}subalg\ indep{\isacharunderscore}{\kern0pt}set{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ integrable{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ OF\ zero{\isacharunderscore}{\kern0pt}order{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ lessI\ indep{\isacharunderscore}{\kern0pt}vars{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ of\ p{\isacharbrackright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ integral{\isacharunderscore}{\kern0pt}toss\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ fortune{\isachardot}{\kern0pt}martingale{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}diff{\isacharunderscore}{\kern0pt}Suc{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}zero\ integrable{\isacharunderscore}{\kern0pt}fortune{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}force\ simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}submartingale{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}\ {\isasymle}\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}submartingale\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p{\isacharparenright}{\kern0pt}\ fortune{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ fortune{\isachardot}{\kern0pt}submartingale{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}diff{\isacharunderscore}{\kern0pt}Suc{\isacharunderscore}{\kern0pt}nonneg\ integrable{\isacharunderscore}{\kern0pt}fortune{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}AE\ {\isasymxi}\ in\ bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isachardot}{\kern0pt}\ {\isadigit{0}}\ {\isasymle}\ cond{\isacharunderscore}{\kern0pt}exp\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p\ n{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isasymxi}{\isachardot}{\kern0pt}\ fortune\ {\isacharparenleft}{\kern0pt}Suc\ n{\isacharparenright}{\kern0pt}\ {\isasymxi}\ {\isacharminus}{\kern0pt}\ fortune\ n\ {\isasymxi}{\isacharparenright}{\kern0pt}\ {\isasymxi}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}indep{\isacharbrackleft}{\kern0pt}OF\ fortune{\isachardot}{\kern0pt}subalg\ indep{\isacharunderscore}{\kern0pt}set{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ integrable{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ OF\ zero{\isacharunderscore}{\kern0pt}order{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ lessI\ indep{\isacharunderscore}{\kern0pt}vars{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ of\ p\ n{\isacharbrackright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ integral{\isacharunderscore}{\kern0pt}toss{\isacharbrackleft}{\kern0pt}of\ p\ {\isachardoublequoteopen}Suc\ n{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}force\ simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{theorem}\isamarkupfalse%
\ fortune{\isacharunderscore}{\kern0pt}supermartingale{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isadigit{0}}\ {\isasymle}\ p{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymle}\ {\isadigit{1}}{\isacharslash}{\kern0pt}{\isadigit{2}}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}nat{\isacharunderscore}{\kern0pt}supermartingale\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p{\isacharparenright}{\kern0pt}\ fortune{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}intro\ fortune{\isachardot}{\kern0pt}supermartingale{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}diff{\isacharunderscore}{\kern0pt}Suc{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}zero\ integrable{\isacharunderscore}{\kern0pt}fortune{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ n\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}AE\ {\isasymxi}\ in\ bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isachardot}{\kern0pt}\ {\isadigit{0}}\ {\isasymge}\ cond{\isacharunderscore}{\kern0pt}exp\ {\isacharparenleft}{\kern0pt}bernoulli{\isacharunderscore}{\kern0pt}stream\ p{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}toss{\isacharunderscore}{\kern0pt}filtration\ p\ n{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isasymxi}{\isachardot}{\kern0pt}\ fortune\ {\isacharparenleft}{\kern0pt}Suc\ n{\isacharparenright}{\kern0pt}\ {\isasymxi}\ {\isacharminus}{\kern0pt}\ fortune\ n\ {\isasymxi}{\isacharparenright}{\kern0pt}\ {\isasymxi}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ cond{\isacharunderscore}{\kern0pt}exp{\isacharunderscore}{\kern0pt}indep{\isacharbrackleft}{\kern0pt}OF\ fortune{\isachardot}{\kern0pt}subalg\ indep{\isacharunderscore}{\kern0pt}set{\isacharunderscore}{\kern0pt}natural{\isacharunderscore}{\kern0pt}filtration\ integrable{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ OF\ zero{\isacharunderscore}{\kern0pt}order{\isacharparenleft}{\kern0pt}{\isadigit{1}}{\isacharparenright}{\kern0pt}\ lessI\ indep{\isacharunderscore}{\kern0pt}vars{\isacharunderscore}{\kern0pt}toss{\isacharcomma}{\kern0pt}\ of\ p\ n{\isacharbrackright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ integral{\isacharunderscore}{\kern0pt}toss{\isacharbrackleft}{\kern0pt}of\ p\ {\isachardoublequoteopen}Suc\ n{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}\ assms\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}force\ simp\ add{\isacharcolon}{\kern0pt}\ fortune{\isacharunderscore}{\kern0pt}toss{\isacharunderscore}{\kern0pt}sum{\isacharparenright}{\kern0pt}\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=Example_Coin_Toss.tex%:%
%:%6=2%:%
%:%7=3%:%
%:%12=4%:%
%:%13=4%:%
%:%14=5%:%
%:%15=6%:%
%:%29=8%:%
%:%41=10%:%
%:%42=11%:%
%:%43=12%:%
%:%47=14%:%
%:%48=15%:%
%:%49=16%:%
%:%53=17%:%
%:%54=18%:%
%:%55=19%:%
%:%59=21%:%
%:%60=22%:%
%:%61=23%:%
%:%65=25%:%
%:%67=27%:%
%:%68=27%:%
%:%69=28%:%
%:%70=29%:%
%:%71=30%:%
%:%72=30%:%
%:%74=30%:%
%:%78=30%:%
%:%79=30%:%
%:%88=32%:%
%:%90=34%:%
%:%91=34%:%
%:%92=35%:%
%:%93=36%:%
%:%94=37%:%
%:%95=37%:%
%:%96=38%:%
%:%97=39%:%
%:%98=40%:%
%:%99=40%:%
%:%102=41%:%
%:%106=41%:%
%:%107=41%:%
%:%108=41%:%
%:%113=41%:%
%:%116=42%:%
%:%117=43%:%
%:%118=43%:%
%:%125=44%:%
%:%126=44%:%
%:%127=45%:%
%:%128=45%:%
%:%129=45%:%
%:%130=46%:%
%:%131=46%:%
%:%132=46%:%
%:%133=46%:%
%:%134=47%:%
%:%135=47%:%
%:%136=47%:%
%:%137=47%:%
%:%138=48%:%
%:%139=48%:%
%:%140=48%:%
%:%141=48%:%
%:%142=49%:%
%:%148=49%:%
%:%151=50%:%
%:%152=51%:%
%:%153=51%:%
%:%156=52%:%
%:%160=52%:%
%:%161=52%:%
%:%162=52%:%
%:%167=52%:%
%:%170=53%:%
%:%171=54%:%
%:%172=54%:%
%:%175=55%:%
%:%179=55%:%
%:%180=55%:%
%:%185=55%:%
%:%188=56%:%
%:%189=57%:%
%:%190=57%:%
%:%193=58%:%
%:%197=58%:%
%:%198=58%:%
%:%203=58%:%
%:%206=59%:%
%:%207=60%:%
%:%208=60%:%
%:%210=60%:%
%:%214=60%:%
%:%215=60%:%
%:%224=62%:%
%:%226=64%:%
%:%227=64%:%
%:%229=64%:%
%:%233=64%:%
%:%234=64%:%
%:%235=64%:%
%:%242=64%:%
%:%243=65%:%
%:%244=66%:%
%:%245=66%:%
%:%247=68%:%
%:%249=70%:%
%:%250=70%:%
%:%253=71%:%
%:%257=71%:%
%:%258=71%:%
%:%259=72%:%
%:%268=74%:%
%:%270=76%:%
%:%271=76%:%
%:%278=77%:%
%:%279=77%:%
%:%280=78%:%
%:%281=78%:%
%:%282=79%:%
%:%283=79%:%
%:%284=80%:%
%:%285=80%:%
%:%286=81%:%
%:%287=82%:%
%:%288=83%:%
%:%289=84%:%
%:%290=85%:%
%:%296=85%:%
%:%299=86%:%
%:%300=87%:%
%:%301=87%:%
%:%304=88%:%
%:%308=88%:%
%:%309=88%:%
%:%310=89%:%
%:%311=89%:%
%:%316=89%:%
%:%319=90%:%
%:%320=91%:%
%:%321=91%:%
%:%323=91%:%
%:%327=91%:%
%:%328=91%:%
%:%329=92%:%
%:%330=92%:%
%:%339=94%:%
%:%341=96%:%
%:%342=96%:%
%:%343=97%:%
%:%344=98%:%
%:%351=99%:%
%:%352=99%:%
%:%353=100%:%
%:%354=100%:%
%:%355=101%:%
%:%356=101%:%
%:%357=101%:%
%:%358=102%:%
%:%359=103%:%
%:%360=103%:%
%:%361=103%:%
%:%362=103%:%
%:%363=104%:%
%:%364=104%:%
%:%365=104%:%
%:%366=105%:%
%:%367=105%:%
%:%368=106%:%
%:%369=106%:%
%:%370=107%:%
%:%371=107%:%
%:%372=107%:%
%:%373=108%:%
%:%374=108%:%
%:%375=109%:%
%:%376=109%:%
%:%377=110%:%
%:%378=110%:%
%:%379=111%:%
%:%380=111%:%
%:%381=112%:%
%:%382=112%:%
%:%383=113%:%
%:%384=113%:%
%:%385=113%:%
%:%386=114%:%
%:%387=114%:%
%:%388=114%:%
%:%389=114%:%
%:%390=115%:%
%:%391=115%:%
%:%392=116%:%
%:%393=116%:%
%:%394=117%:%
%:%395=117%:%
%:%396=118%:%
%:%397=118%:%
%:%398=118%:%
%:%399=118%:%
%:%400=119%:%
%:%401=119%:%
%:%402=120%:%
%:%403=120%:%
%:%404=120%:%
%:%405=120%:%
%:%406=121%:%
%:%407=121%:%
%:%408=122%:%
%:%409=122%:%
%:%410=123%:%
%:%411=123%:%
%:%412=124%:%
%:%413=124%:%
%:%414=125%:%
%:%415=125%:%
%:%416=125%:%
%:%417=125%:%
%:%418=125%:%
%:%419=126%:%
%:%420=126%:%
%:%421=126%:%
%:%422=127%:%
%:%423=127%:%
%:%424=128%:%
%:%425=128%:%
%:%426=128%:%
%:%427=129%:%
%:%428=129%:%
%:%429=130%:%
%:%430=131%:%
%:%431=131%:%
%:%432=132%:%
%:%433=132%:%
%:%434=132%:%
%:%435=132%:%
%:%436=132%:%
%:%437=133%:%
%:%438=133%:%
%:%439=133%:%
%:%440=133%:%
%:%441=133%:%
%:%442=134%:%
%:%448=134%:%
%:%451=135%:%
%:%452=136%:%
%:%453=136%:%
%:%454=137%:%
%:%455=138%:%
%:%456=139%:%
%:%459=140%:%
%:%463=140%:%
%:%464=140%:%
%:%465=141%:%
%:%466=141%:%
%:%475=143%:%
%:%477=145%:%
%:%478=145%:%
%:%479=146%:%
%:%480=147%:%
%:%487=148%:%
%:%488=148%:%
%:%489=149%:%
%:%490=149%:%
%:%491=149%:%
%:%492=150%:%
%:%493=150%:%
%:%494=151%:%
%:%495=151%:%
%:%496=152%:%
%:%497=152%:%
%:%498=153%:%
%:%499=153%:%
%:%500=154%:%
%:%501=154%:%
%:%502=154%:%
%:%503=154%:%
%:%504=154%:%
%:%505=155%:%
%:%506=155%:%
%:%507=156%:%
%:%508=156%:%
%:%509=156%:%
%:%510=156%:%
%:%511=157%:%
%:%512=157%:%
%:%513=157%:%
%:%514=157%:%
%:%515=157%:%
%:%516=158%:%
%:%526=160%:%
%:%528=162%:%
%:%529=162%:%
%:%530=163%:%
%:%531=164%:%
%:%538=165%:%
%:%539=165%:%
%:%540=166%:%
%:%541=166%:%
%:%542=167%:%
%:%543=167%:%
%:%544=167%:%
%:%545=168%:%
%:%546=168%:%
%:%547=168%:%
%:%548=169%:%
%:%549=169%:%
%:%550=169%:%
%:%551=169%:%
%:%552=170%:%
%:%553=171%:%
%:%554=171%:%
%:%555=172%:%
%:%556=172%:%
%:%558=173%:%
%:%560=174%:%
%:%561=174%:%
%:%562=175%:%
%:%563=175%:%
%:%564=175%:%
%:%565=175%:%
%:%566=176%:%
%:%567=176%:%
%:%568=176%:%
%:%569=176%:%
%:%570=177%:%
%:%571=177%:%
%:%572=177%:%
%:%573=177%:%
%:%574=178%:%
%:%575=178%:%
%:%576=178%:%
%:%577=178%:%
%:%578=178%:%
%:%579=179%:%
%:%580=179%:%
%:%581=179%:%
%:%582=179%:%
%:%583=179%:%
%:%584=180%:%
%:%587=181%:%
%:%589=182%:%
%:%590=182%:%
%:%591=183%:%
%:%592=183%:%
%:%593=183%:%
%:%594=183%:%
%:%595=184%:%
%:%596=185%:%
%:%597=186%:%
%:%598=186%:%
%:%599=187%:%
%:%600=187%:%
%:%601=187%:%
%:%602=187%:%
%:%603=187%:%
%:%604=188%:%
%:%605=188%:%
%:%606=188%:%
%:%607=188%:%
%:%608=189%:%
%:%609=189%:%
%:%610=190%:%
%:%611=190%:%
%:%612=190%:%
%:%614=192%:%
%:%616=194%:%
%:%617=194%:%
%:%618=195%:%
%:%619=195%:%
%:%620=195%:%
%:%621=196%:%
%:%622=197%:%
%:%623=197%:%
%:%624=198%:%
%:%625=198%:%
%:%626=198%:%
%:%627=199%:%
%:%628=200%:%
%:%629=200%:%
%:%630=200%:%
%:%631=200%:%
%:%632=201%:%
%:%633=201%:%
%:%634=201%:%
%:%635=202%:%
%:%636=202%:%
%:%637=202%:%
%:%638=203%:%
%:%639=203%:%
%:%640=203%:%
%:%641=204%:%
%:%642=204%:%
%:%643=205%:%
%:%644=205%:%
%:%645=205%:%
%:%646=205%:%
%:%647=205%:%
%:%648=206%:%
%:%649=206%:%
%:%650=206%:%
%:%651=206%:%
%:%652=206%:%
%:%653=207%:%
%:%654=207%:%
%:%655=207%:%
%:%656=207%:%
%:%657=207%:%
%:%658=208%:%
%:%659=208%:%
%:%660=208%:%
%:%661=208%:%
%:%662=209%:%
%:%663=209%:%
%:%664=210%:%
%:%665=210%:%
%:%666=211%:%
%:%667=211%:%
%:%668=211%:%
%:%669=212%:%
%:%670=212%:%
%:%671=213%:%
%:%672=213%:%
%:%681=215%:%
%:%683=217%:%
%:%684=217%:%
%:%685=218%:%
%:%686=219%:%
%:%689=220%:%
%:%693=220%:%
%:%694=220%:%
%:%695=221%:%
%:%696=222%:%
%:%697=222%:%
%:%702=222%:%
%:%705=223%:%
%:%706=224%:%
%:%707=224%:%
%:%708=225%:%
%:%709=226%:%
%:%716=227%:%
%:%717=227%:%
%:%718=228%:%
%:%719=228%:%
%:%720=229%:%
%:%721=229%:%
%:%722=230%:%
%:%723=230%:%
%:%724=231%:%
%:%725=232%:%
%:%726=232%:%
%:%727=233%:%
%:%733=233%:%
%:%736=234%:%
%:%737=235%:%
%:%738=235%:%
%:%739=236%:%
%:%740=237%:%
%:%747=238%:%
%:%748=238%:%
%:%749=239%:%
%:%750=239%:%
%:%751=240%:%
%:%752=240%:%
%:%753=241%:%
%:%754=241%:%
%:%755=242%:%
%:%756=243%:%
%:%757=243%:%
%:%758=244%:%
%:%764=244%:%
%:%769=245%:%
%:%774=246%:%
